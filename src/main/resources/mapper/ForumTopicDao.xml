<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tech.ufun.forum.mapper.ForumTopicMapper">

    <resultMap type="tech.ufun.forum.domain.ForumTopic" id="ForumTopicMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="topicId" column="topic_id" jdbcType="VARCHAR"/>
        <result property="topic" column="topic" jdbcType="VARCHAR"/>
        <result property="listOrder" column="list_order" jdbcType="INTEGER"/>
        <result property="status" column="status" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="findById" resultMap="ForumTopicMap">
        select
          id, topic_id, topic, list_order, status
        from forum_topic
        where topic_id = #{topicId}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="findAll" resultMap="ForumTopicMap">
        select
          id, topic_id, topic, list_order, status
        from forum_topic
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="topicId != null and topicId != ''">
                and topic_id = #{topicId}
            </if>
            <if test="topic != null and topic != ''">
                and topic = #{topic}
            </if>
            <if test="listOrder != null">
                and list_order = #{listOrder}
            </if>
            <if test="status != null">
                and status = #{status}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert">
        insert into forum_topic(topic_id, topic, list_order, status)
        values (#{topicId}, #{topic}, #{listOrder}, #{status})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update forum_topic
        <set>
            <if test="topic != null and topic != ''">
                topic = #{topic},
            </if>
            <if test="listOrder != null">
                list_order = #{listOrder},
            </if>
            <if test="status != null">
                status = #{status},
            </if>
        </set>
        where topic_id = #{topicId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from forum_topic where topic_id = #{topicId}
    </delete>

</mapper>